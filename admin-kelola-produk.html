<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kelola Produk - Bomboskuy</title>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <link href="./assets/css/nucleo-icons.css" rel="stylesheet" />
  <link href="./assets/css/nucleo-svg.css" rel="stylesheet" />
  <script src="https://unpkg.com/@popperjs/core@2"></script>
  <link href="./assets/css/argon-dashboard-tailwind.css?v=1.0.1" rel="stylesheet" />
  <link rel="icon" type="image/png" href="assets/bomboskuy-nobg.png" />
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
  button i {
    font-size: 16px;
  }
  </style>
  <style>
    body {
      font-family: 'Nunito', sans-serif;
      background: linear-gradient(135deg, #fffaf0 0%, #fff4e6 100%);
    }
    .swal2-confirm {
      background-color: #f97316 !important;
      color: white !important;
      font-weight: bold;
    }
    .swal2-cancel {
      background-color: #6b7280 !important;
      color: white !important;
      font-weight: bold;
    }
    .swal2-confirm.delete-button {
      background-color: #dc2626 !important;
    }
  </style>
</head>
<body class="m-0 font-sans text-base antialiased font-normal dark:bg-slate-900 leading-default bg-gray-50 text-slate-500">
  <div class="absolute w-full bg-blue-500 dark:hidden min-h-75"></div>

  <!-- Sidebar -->
  <aside class="fixed inset-y-0 flex-wrap items-center justify-between block w-full p-0 my-4 overflow-y-auto antialiased transition-transform duration-200 -translate-x-full bg-white border-0 shadow-xl dark:shadow-none dark:bg-slate-850 max-w-64 ease-nav-brand z-990 xl:ml-6 rounded-2xl xl:left-0 xl:translate-x-0" aria-expanded="false">
    <div class="h-19">
      <a class="block px-8 py-6 m-0 text-sm whitespace-nowrap dark:text-white text-slate-700" href="home.html">
        <img src="./assets/bomboskuy-nobg.png" class="inline h-full max-w-full transition-all duration-200 dark:hidden ease-nav-brand max-h-8" alt="main_logo" />
        <span class="ml-1 font-semibold transition-all duration-200 ease-nav-brand">Bomboskuy</span>
      </a>
    </div>
    <hr class="h-px mt-0 bg-transparent bg-gradient-to-r from-transparent via-black/40 to-transparent dark:bg-gradient-to-r dark:from-transparent dark:via-white dark:to-transparent" />
    <div class="items-center block w-auto max-h-screen overflow-auto h-sidenav grow basis-full">
      <ul class="flex flex-col pl-0 mb-0">
        <li class="mt-0.5 w-full">
          <a class="py-2.7 text-sm ease-nav-brand my-0 mx-2 flex items-center whitespace-nowrap px-4 transition-colors" href="admin.html">
            <div class="mr-2 flex h-8 w-8 items-center justify-center">
              <i class="ni ni-tv-2"></i>
            </div>
            <span class="ml-1">Dashboard</span>
          </a>
        </li>
        <li class="mt-0.5 w-full">
          <a class="py-2.7 text-sm ease-nav-brand my-0 mx-2 flex items-center whitespace-nowrap px-4 transition-colors" href="admin-kelola-artikel.html">
            <div class="mr-2 flex h-8 w-8 items-center justify-center text-orange-500">
              <i class="ni ni-single-copy-04"></i>
            </div>
            <span class="ml-1 duration-300">Kelola Artikel</span>
          </a>
        </li>
        <li class="mt-0.5 w-full">
          <a class="py-2.7 text-sm ease-nav-brand my-0 mx-2 flex items-center whitespace-nowrap  rounded-lg px-4 font-semibold text-slate-700 transition-colors bg-blue-500/13" href="admin-kelola-produk.html">
            <div class="mr-2 flex h-8 w-8 items-center justify-center text-emerald-500">
              <i class="ni ni-box-2"></i>
            </div>
            <span class="ml-1">Kelola Produk</span>
          </a>
        </li>
        <li class="mt-0.5 w-full">
          <a class="py-2.7 text-sm ease-nav-brand my-0 mx-2 flex items-center whitespace-nowrap px-4 transition-colors" href="admin-kelola-pengguna.html">
            <div class="mr-2 flex h-8 w-8 items-center justify-center text-cyan-500">
              <i class="ni ni-circle-08"></i>
            </div>
            <span class="ml-1">Kelola Pengguna</span>
          </a>
        </li>
        <li class="mt-0.5 w-full">
          <a class="py-2.7 text-sm ease-nav-brand my-0 mx-2 flex items-center whitespace-nowrap px-4 transition-colors" href="admin-kelola-transaksi.html">
            <div class="mr-2 flex h-8 w-8 items-center justify-center text-red-500">
              <i class="ni ni-credit-card"></i>
            </div>
            <span class="ml-1">Kelola Transaksi</span>
          </a>
        </li>
      </ul>
    </div>
  </aside>

  <main class="relative h-full max-h-screen transition-all duration-200 ease-in-out xl:ml-68 rounded-xl">
    <div class="w-full px-6 py-6 mx-auto">
      <div class="flex justify-between items-center mb-4">
      <h1 class="text-3xl font-bold">Kelola Produk</h1>
      <button onclick="tambahProduk()" class="bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600">Tambah Produk</button>
    </div>

      <div class="overflow-x-auto">
        <table class="min-w-full table-auto border bg-white shadow rounded-lg">
          <thead class="bg-slate-200 text-slate-700">
          <tr>
            <th class="p-4">Gambar</th>
            <th class="p-4">Nama</th>
            <th class="p-4">Deskripsi</th>
            <th class="p-4">Harga</th>
            <th class="p-4">Aksi</th>
          </tr>
        </thead>
        <tbody id="produk-tbody" class="divide-y divide-gray-200"></tbody>
      </table>
    </div>
  </div>

  <script>
    let produkList = {
      "bomboloni-coklat": {
        nama: "Bomboloni Coklat",
        deskripsi: "Bomboloni isi coklat dengan topping glaze coklat lumer. Cocok untuk pecinta manis!",
        gambar: "assets/bombo-coklat.jpg",
        harga: 10000
      },
      "bomboloni-keju": {
        nama: "Bomboloni Keju",
        deskripsi: "Lembutnya donat dengan isian krim keju gurih dan taburan keju parut.",
        gambar: "assets/bombo-keju.jpg",
        harga: 10000
      },
      "bomboloni-matcha": {
        nama: "Bomboloni Matcha",
        deskripsi: "Bomboloni dengan rasa khas teh hijau Jepang yang nikmat dan ringan.",
        gambar: "assets/bombo-matcha.jpg",
        harga: 10000
      },
      "bomboloni-tiramisu": {
        nama: "Bomboloni Tiramisu",
        deskripsi: "Bomboloni rasa tiramisu lembut dengan sentuhan kopi dan krim.",
        gambar: "assets/bombo-tiramisu.jpg",
        harga: 10000
      },
      "bomboloni-stroberi": {
        nama: "Bomboloni Stroberi",
        deskripsi: "Isian stroberi segar berpadu dengan lembutnya bomboloni.",
        gambar: "assets/bombo-stroberi.jpg",
        harga: 10000
      },
      "bomboloni-vanilla": {
        nama: "Bomboloni Vanilla",
        deskripsi: "Bomboloni klasik dengan isian krim vanilla manis.",
        gambar: "assets/bombo-vanilla.jpg",
        harga: 10000
      },
      "bomboloni-pisang": {
        nama: "Bomboloni Pisang",
        deskripsi: "Perpaduan bomboloni dengan isian pisang manis.",
        gambar: "assets/bombo-pisang.jpg",
        harga: 10000
      },
      "bomboloni-blueberry": {
        nama: "Bomboloni Blueberry",
        deskripsi: "Lezatnya bomboloni dengan selai blueberry segar.",
        gambar: "assets/bombo-blueberry.jpg",
        harga: 10000
      },
      "bomboloni-taro": {
        nama: "Bomboloni Taro",
        deskripsi: "Bomboloni taro dengan rasa manis dan warna ungu menarik.",
        gambar: "assets/bombo-taro.jpg",
        harga: 10000
      },
    };

    function renderProduk() {
      const tbody = document.getElementById("produk-tbody");
      tbody.innerHTML = "";

      Object.entries(produkList).forEach(([id, produk]) => {
        tbody.innerHTML += `
          <tr>
            <td class="p-4"><img src="${produk.gambar}" alt="${produk.nama}" class="w-16 h-16 object-cover rounded"></td>
            <td class="p-4 font-semibold">${produk.nama}</td>
            <td class="p-4">${produk.deskripsi}</td>
            <td class="p-4">Rp ${produk.harga.toLocaleString()}</td>
            <td class="p-4 space-x-2">
              <button onclick="editProduk('${id}')" class="text-orange-500 hover:text-orange-700"><i class="fas fa-edit"></i></button>
              <button onclick="hapusProduk('${id}')" class="text-red-500 hover:text-red-700"><i class="fas fa-trash"></i></button>
            </td>
          </tr>
        `;
      });
    }

    function tambahProduk() {
      Swal.fire({
        title: 'Tambah Produk',
        html: `
          <input id="nama" class="swal2-input" placeholder="Nama Produk">
          <input id="deskripsi" class="swal2-input" placeholder="Deskripsi">
          <input id="harga" type="number" class="swal2-input" placeholder="Harga">
          <input id="gambar" type="file" accept="image/*" class="swal2-file">
        `,
        showCancelButton: true,
        confirmButtonText: 'Tambah',
        preConfirm: () => {
          const nama = document.getElementById("nama").value;
          const deskripsi = document.getElementById("deskripsi").value;
          const harga = parseInt(document.getElementById("harga").value);
          const gambarFile = document.getElementById("gambar").files[0];
          const gambar = gambarFile ? URL.createObjectURL(gambarFile) : "https://via.placeholder.com/80x80";

          if (!nama || !deskripsi || !harga) {
            Swal.showValidationMessage("Semua field wajib diisi");
          } else {
            const id = `produk-${Date.now()}`;
            produkList[id] = { nama, deskripsi, harga, gambar };
            renderProduk();
          }
        }
      });
    }

    function editProduk(id) {
      const produk = produkList[id];
      Swal.fire({
        title: 'Edit Produk',
        html: `
          <input id="nama" class="swal2-input" value="${produk.nama}">
          <input id="deskripsi" class="swal2-input" value="${produk.deskripsi}">
          <input id="harga" type="number" class="swal2-input" value="${produk.harga}">
          <input id="gambar" type="file" accept="image/*" class="swal2-file">
        `,
        showCancelButton: true,
        confirmButtonText: 'Update',
        cancelButtonText: 'Batal',
        preConfirm: () => {
          const nama = document.getElementById("nama").value;
          const deskripsi = document.getElementById("deskripsi").value;
          const harga = parseInt(document.getElementById("harga").value);
          const gambarFile = document.getElementById("gambar").files[0];
          const gambar = gambarFile ? URL.createObjectURL(gambarFile) : produk.gambar;

          if (!nama || !deskripsi || !harga) {
            Swal.showValidationMessage("Semua field wajib diisi");
          } else {
            produkList[id] = { nama, deskripsi, harga, gambar };
            renderProduk();
          }
        }
      });
    }

    function hapusProduk(id) {
      Swal.fire({
        title: 'Yakin ingin menghapus produk ini?',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonText: 'Hapus',
        cancelButtonText: 'Batal',
        didOpen: () => {
          document.querySelector('.swal2-confirm').classList.add('delete-button');
        }
      }).then(result => {
        if (result.isConfirmed) {
          delete produkList[id];
          renderProduk();
        }
      });
    }

    renderProduk();
  </script>

</body>
</html>
